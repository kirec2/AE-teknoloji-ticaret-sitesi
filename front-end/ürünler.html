<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AE Teknloji Site Tasarımı</title>
  <link rel="stylesheet" href="style.css"> 
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Special+Gothic+Expanded+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href=" https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/fontawesome.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=search" />

</head>
<body>
    <div class="header">
        <div class="container">
            <div class="navbar">
                <div class="logo">
                    <img src="images/logo.png" width="125px">
                </div>
                <form class="search-bar">
                    <span class="material-symbols-outlined">search</span>
                    <input class="search-bar-input" type="search" placeholder="Ürün, kategori veya marka ara...">
                    <button type="submit">Ara</button>
                </form>
               <nav>
                    <ul id="MenuItems">
                     <li><a href="file.html">Ana Sayfa</a> </li>
                     <li><a href="ürünler.html">Ürün</a> </li>
                     <li><a href="favoriler.html">Favori</a> </li>
                     <li><a href="kayıt.html">Hesap</a> </li>
                     <li><a href="kargo-takip.html">Kargo Takip</a> </li>
                    </ul>
                </nav>
                <div class="language-selector">
                    <select id="languageSelect">
                        <option value="tr">Türkçe</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <a href="sepet.html"><img src="images/cart.png" width="30px" height="30px"></a>
                <img src="images/menu-icon.png" class="menu-icon" onclick="menutoggle()">
            </div>
        </div>
    </div>

<!--Products-->
<div class="small-container"></div>

<div class="row-2">
    <h2 class="title">Tüm Ürünler</h2>  
</div>

<div class="row-2" id="product-list">
    <!-- Ürünler buraya dinamik olarak eklenecek -->
</div>
<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  var langSelect = document.getElementById('languageSelect');
  if (langSelect) {
    langSelect.addEventListener('change', window.changeLanguage);
  }
});
document.querySelector('.search-bar').onsubmit = function(e) {
    e.preventDefault();
    const query = document.querySelector('.search-bar-input').value.trim();
    if (!query) return;
    window.location.href = `arama-sonuclari.html?q=${encodeURIComponent(query)}`;
};

fetch('http://localhost:3001/api/products')
  .then(res => res.json())
  .then(products => {
    const productList = document.getElementById('product-list');
    productList.innerHTML = '';
    if (!products.length) {
      productList.innerHTML = '<div style="color:#888;">Hiç ürün bulunamadı.</div>';
      return;
    }
    // Satır başlatma
    let row;
    products.forEach((product, idx) => {
      if (idx % 4 === 0) {
        row = document.createElement('div');
        row.className = 'row-2';
        productList.appendChild(row);
      }
      const col = document.createElement('div');
      col.className = 'col-4';
      col.innerHTML = `
        <a href="ürün-detayları.html?id=${product._id}">
          <img src="${product.imageUrl}" alt="${product.name}">
          <h4>${product.name}</h4>
          <p>${product.price} TL</p>
          <span style='font-size:13px;color:#888;'>${product.series}</span>
        </a>
      `;
      row.appendChild(col);
    });
  })
  .catch(err => {
    document.getElementById('product-list').innerHTML = '<div style="color:red;">Ürünler yüklenemedi.</div>';
    console.error('Ürünler yüklenemedi:', err);
  });
</script>

</body>
</html>
